<krpano>
    <include url="%SWFPATH%/plugins/webvr.xml" />

    <plugin name="WebVR"
            url="%SWFPATH%/plugins/webvr.js"
            mobilevr_fake_support="true"
            onentervr="trace('onentervr'); webvr_onentervr();"
            onexitvr="trace('onexitvr'); webvr_onexitvr();"
            onavailable=""
    />  
    <skin_settings gyro="true"
                   webvr="true"
                   webvr_gyro_keeplookingdirection="false"
                   webvr_prev_next_hotspots="true"
                   loadscene_flags="MERGE|KEEPVIEW"
                   loadscene_blend="OPENBLEND(0.5, 0.0, 0.75, 0.05, linear)"
                   loadscene_blend_prev="SLIDEBLEND(0.5, 180, 0.75, linear)"
                   loadscene_blend_next="SLIDEBLEND(0.5,   0, 0.75, linear)"
                   loadingtext="loading..."

                   category_width="25%"
                   category_width.mobile="29%"
                   
                   category_maxwidth="300"
                   category_maxwidth.mobile="170"

                   vr_bttn_width="25%"
                   vr_bttn_width.mobile="47%"
                   vr_bttn_maxwidth="300"
                   vr_bttn_maxwidth.mobile="180"
                   
                    category_text="font-family: Montserrat-Light;
                                    text-transform: uppercase;
                                    letter-spacing: 2px;
                                    font-size:0.80rem;
                                    color:#FFFFFF; 
                                    text-align: center;"
                    category_text.mobile="font-family: Montserrat-Light;
                                    text-transform: uppercase;
                                    font-size:9px;
                                    letter-spacing: 0.5px;
                                    color:#FFFFFF;
                                    text-align: center;"
                    price_text="font-family: Montserrat-Light;
                                    text-transform: uppercase;
                                    letter-spacing: 2px;
                                    font-size:0.80rem;
                                    color:#FFFFFF; 
                                    text-align: center;"
                    price_text.mobile="font-family: Montserrat-Light;
                                    text-transform: uppercase;
                                    letter-spacing: 2px;
                                    font-size:9px;
                                    color:#FFFFFF; 
                                    text-align: center;"
                    vr_text_css="font-family: Montserrat-Light;
                                    text-transform: uppercase;
                                    text-decoration:underline;
                                    letter-spacing: 2px;
                                    font-size:0.80rem;
                                    color:#FFFFFF;"
                    vr_text_css.mobile="font-family: Montserrat-Light;
                                    text-transform: uppercase;
                                    text-decoration:underline;
                                    font-size:9px;
                                    color:#FFFFFF;"
                    />
    <autorotate enabled="true"
            waittime="1.5"
            speed="3.0"
    />
    <events name="skin_events" keep="true"
        onresize="check_portrait_mode()"
        onxmlcomplete="check_portrait_mode()"
        onexitvr="trace ('out from vr_support.xml'); tween(layer[webvr_enterbutton].alpha,0,0);"
        webvr_onexitvr="trace ('out from vr_support.xml'); tween(layer[webvr_enterbutton].alpha,0,0);"
    />
    <!--
        onnewscene="set_scene_title();"
        onmousedown="close_if_open();"
    -->
    <style name="categories_background"
            type="container"
            keep="true"
            align="bottom"
            width="get:skin_settings.category_width"
            maxwidth="get:skin_settings.category_maxwidth"
            height="137"
            height.mobile="70"
            y="100"
            y.mobile="60"
            maskchildren="true"
            visible="true"
            bgroundedge="21"
            bgroundedge.mobile="13"
            bgcolor="0x000000"
            bgalpha="0.50"
            bgcapture="false" zorder="1"
        />
    <style name="categories_text"
            type="text"
            width="100%"
            wordwrap="true"
            align="top" x="0" y="17%"
                y.mobile="9"
            css="get:skin_settings.category_text"
            vcenter="false"
            bg="false"
            zorder="55"
            enabled="true"
            capture="false"
        />
    <style name="price_text"
            type="text"
            align="bottom"
            width="100%"
            wordwrap="true"
            x="0" y="17%"
                y.mobile="10"
            css="get:skin_settings.price_text"
            bg="false"
            zorder="55"
            enabled="true"
            capture="false"
        />

    <layer name="logo_img" keep="true" type="image" align="topleft"
            url="logo_img.svg"
            height="40"
            height.mobile="24"
            width="prop"
            visible.mobile="true"
            visible="true"
            x="16" y="16"
            alpha="1"
        />
    <layer name="logo_text" keep="true" type="image" align="topleft"
            url="logo_text.svg"
            height="40"
            height.mobile="24"
            width="prop"
            visible="true"
            x="16" y="16"
            alpha="1"
        />

<!--VTOUR DEMO-->

    <layer name="virtual_category"
        style="categories_background"
        x="-27%"
        x.mobile="-32%"
    >
        <layer name="virtual_text"
            style="categories_text"
            html="360&amp;deg; virtual tour"
           />
        <layer name="virtual_price"
            style="price_text"
            html="[b style='color:ffffff; font-family: Montserrat-Bold; letter-spacing: 0px; font-size:2.70rem;']400[/b] usd&amp;nbsp;/&amp;nbsp;spot"
            html.mobile="[b style='color:ffffff; font-family: Montserrat-Bold; letter-spacing: 2px; font-size:18px;']400[/b] usd&amp;nbsp;/&amp;nbsp;spot"
        />
        <layer name="virtual_click" keep="true" type="text" align="center"
            width="100%"
            height="100%"
            maskchildren="true" visible="true"
            enabled="true"
            bgroundedge="21"
            bgcolor="0x000000"
            bgalpha="0.0001"
            bgcapture="true"
            zorder="61"
            onclick="trace('virtual click'); loadscene(scene_vtour, null, MERGE, BLEND(1));"
        />
    </layer>

<!--UNDERWATER DEMO-->

    <layer name="underwater_category"
        style="categories_background"
        x="0"
    >
        <layer name="underwater_text"
            style="categories_text"
            html="360&amp;deg; underwater"
        />
        <layer name="underwater_price"
            style="price_text"
            html="[b style='color:ffffff; font-family: Montserrat-Bold; letter-spacing: 0px; font-size:2.70rem;']1400[/b] usd&amp;nbsp;/&amp;nbsp;spot"
            html.mobile="[b style='color:ffffff; font-family: Montserrat-Bold; letter-spacing: 2px; font-size:18px;']1400[/b] usd&amp;nbsp;/&amp;nbsp;spot"
        />
        <layer name="underwater_click"
            keep="true" type="text" align="center"
            width="100%" height="100%"
            maskchildren="true" visible="true"
            enabled="true"
            bgroundedge="21"
            bgcolor="0x000000"
            bgalpha="0.0001"
            bgcapture="true"
            zorder="61"
            onclick="panotrace('underwater click'); loadscene(scene_underwater, null, MERGE, BLEND(1));"
        />
    </layer>

<!--AERIAL DEMO-->

    <layer name="aerial_category"
        style="categories_background"
        x="27%"
        x.mobile="32%"
    >
        <layer name="aerial_text" type="text"
            style="categories_text"
            html="360&amp;deg; aerial"
        />
       <layer name="aerial_price"
            style="price_text"
            html="[b style='color:ffffff; font-family: Montserrat-Bold; letter-spacing: 0px; font-size:2.70rem;']1000[/b] usd&amp;nbsp;/&amp;nbsp;spot"
            html.mobile="[b style='color:ffffff; font-family: Montserrat-Bold; letter-spacing: 2px; font-size:18px;']1000[/b] usd&amp;nbsp;/&amp;nbsp;spot"
       />
        <layer name="aerial_click" keep="true" type="text" align="center"
            width="100%"
            height="100%"
            maskchildren="true" visible="true"
            enabled="true"
            bgroundedge="21"
            bgcolor="0x000000"
            bgalpha="0.0001"
            bgcapture="true"
            zorder="61"
            onclick="trace('aerial click'); loadscene(scene_aerial, null, MERGE, BLEND(1));"
        />
    </layer>

<!--VR BUTTON-->

    <layer name="vr_button" keep="true" type="container" align="bottom"
        width="get:skin_settings.vr_bttn_width"
        maxwidth="get:skin_settings.vr_bttn_maxwidth"
        height="40" maskchildren="true" visible="true"
        height.mobile="30"
        y="32" x="0"
        y.mobile="16"
        bgroundedge="11"
        bgroundedge.mobile="7"
        bgcolor="0x000000"
        bgalpha="0.50"
        bgcapture="false" zorder="1"
        onclick="trace('vr');"
        >
        <layer name="vr_click" keep="true" type="text" align="center"
            width="100%"
            height="100%"
            maskchildren="true" visible="true"
            enabled="true"
            bgroundedge="21"
            bgcolor="0xffffff"
            bgalpha="0.0001"
            bgcapture="true"
            zorder="65"
            onclick="trace('befrore'); open_close_vr_info(get(layer[wrrap_to_vr].open_state)); trace('after');"
            onclick.mobile="trace('vr_click click'); webvr.enterVR();"
        /><!--vr_click-->
        <layer name="vr_wrap" keep="true" type="text" align="center"
            width="230"
            width.mobile="80%"
            height="100%"
            maskchildren="true" visible="true"
            enabled="true"
            bgroundedge="21"
            bgcolor="0x000000"
            bgalpha="0.00001"
            bgcapture="true"
            zorder="61"
        >
            <layer name="vr_img" keep="true" type="image" align="left"
                url="vr.svg"
                height="18"
                height.mobile="16"
                width="prop"
                visible="true"
                x="0" y="0"
            />
            <layer name="vr_text" type="text"
                align="right"
                x="0"
                y="-2"
                y.mobile="0"
                html="EXPLORE IN VR MODE"
                css="get:skin_settings.vr_text_css"
                bg="false"
            />
        </layer><!--vr_wrap-->
    </layer>
<!--END VR BUTTON-->

<!--GO TO VR-->
    <layer name="wrrap_to_vr" type="container" keep="true" align="center" open_state="false"
            alpha="1" autoalpha="true"
            bgcolor="0x000000" bgalpha="0.50" bgborder="0" bgroundedge="20 20 20 20"
            x="0" y="-100"
            width="470" height="350">
        <layer name="st_text" keep="true" type="text" y="20" align="top" style="price_text" bg="false" html="[b]EXPLORE WITH VIRTUAL REALITY[/b]"/>

        <layer name="nd_text" keep="true" type="text" y="55" align="top" style="categories_text" bg="false" html="1. SCAN THE FOLLOWING QR CODE ON YOUR SMARTPHONE"/>

        <layer name="qr_code" keep="true" type="image" url="qr.svg" width="100" height="prop" align="top" y="107"/>

        <layer name="rd_text" keep="true" type="text" y="233" align="top" style="categories_text" bg="false" html="2. ATTACH YOUR SMARTPHONE TO A VR HEADSET"/>
        <layer name="vr_glass" keep="true" type="image" url="vr.svg" width="90" height="prop" align="top" y="266"/>
    </layer>
<!--END GO TO VR-->

    <action name="check_portrait_mode">
        div(aspect, stagewidth, stageheight);
        if(aspect != lastmobileaspect,
            copy(lastmobileaspect, aspect);
            if(stagewidth GT stageheight,
                tween(layer[logo_img].alpha, 0.0, 0.1, easeInCubic);
                tween(layer[logo_text].alpha, 1.0, 0.1, easeInCubic);
              ,
                tween(layer[logo_img].alpha, 1.0, 0.1, easeInCubic);
                tween(layer[logo_text].alpha, 0.0, 0.1, easeInCubic);
            );
        );
    </action>

</krpano>